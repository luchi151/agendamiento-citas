{% extends 'citas/base_citas.html' %}

{% block title %}Consultar Cita - ATENEA{% endblock %}

{% block page_title %}Resultado de Consulta{% endblock %}

{% block extra_css %}
<style>
    .form-container {
        max-width: 900px;
    }
    
    .cita-resultado {
        background: #f8f9fa;
        border: 2px solid #0d47a1;
        border-radius: 10px;
        padding: 30px;
        margin-top: 30px;
    }
    
    .cita-titulo {
        color: #0d47a1;
        font-weight: bold;
        font-size: 1.5rem;
        margin-bottom: 25px;
    }
    
    .cita-icon {
        font-size: 4rem;
        color: #0d47a1;
    }
    
    .cita-info {
        font-size: 1.1rem;
        line-height: 2;
    }
    
    .cita-info strong {
        color: #424242;
    }
    
    .estado-badge {
        display: inline-block;
        padding: 8px 20px;
        border-radius: 20px;
        font-weight: bold;
        background-color: #4caf50;
        color: white;
    }
    
    .no-cita-message {
        text-align: center;
        padding: 40px;
        color: #757575;
    }
    
    .no-cita-message i {
        font-size: 4rem;
        color: #bdbdbd;
        margin-bottom: 20px;
    }
</style>
{% endblock %}

{% block content %}
<div class="form-container">
    <h2 class="section-title">
        Por tu seguridad, ingresa los siguientes datos para consultar tu cita
    </h2>
    
    <!-- Formulario pequeño (datos ya ingresados) -->
    <div class="row">
        <div class="col-md-6 mb-3">
            <label class="form-label fw-bold">Tipo de documento</label>
            <input type="text" class="form-control" value="{{ form.tipo_documento.value }}" readonly>
        </div>
        <div class="col-md-6 mb-3">
            <label class="form-label fw-bold">Número de documento</label>
            <input type="text" class="form-control" value="{{ form.numero_documento.value }}" readonly>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6 mb-3">
            <label class="form-label fw-bold">Celular</label>
            <input type="text" class="form-control" value="{{ form.celular.value }}" readonly>
        </div>
        <div class="col-md-6 mb-3">
            <label class="form-label fw-bold">Correo electrónico</label>
            <input type="text" class="form-control" value="{{ form.correo_electronico.value }}" readonly>
        </div>
    </div>
    
    <div class="d-flex justify-content-center mb-3">
        <a href="{% url 'citas:consultar_cita' %}" class="btn btn-volver">
            <i class="bi bi-arrow-left"></i> Volver
        </a>
    </div>
    
    {% if cita %}
    <!-- Resultado: Próxima cita -->
    <div class="cita-resultado">
        <h3 class="cita-titulo">Próxima cita:</h3>
        
        <div class="row align-items-center">
            <div class="col-md-3 text-center">
                <i class="bi bi-calendar-check cita-icon"></i>
            </div>
            <div class="col-md-9">
                <div class="cita-info">
                    <p class="mb-2">
                        <strong>Documento:</strong> {{ cita.solicitante.numero_documento }}
                    </p>
                    <p class="mb-2">
                        <strong>Fecha:</strong> {{ cita.fecha|date:"d/m/Y" }}
                    </p>
                    <p class="mb-2">
                        <strong>Hora:</strong> {{ cita.hora_inicio|time:"H:i" }}
                    </p>
                    <p class="mb-2">
                        <strong>Estado:</strong> 
                        <span class="estado-badge">{{ cita.get_estado_display }}</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <!-- Sin citas -->
    <div class="cita-resultado">
        <div class="no-cita-message">
            <i class="bi bi-calendar-x"></i>
            <h4>No tienes citas agendadas</h4>
            <p class="text-muted">No encontramos ninguna cita próxima con los datos proporcionados.</p>
            <a href="{% url 'citas:agendar_cita' %}" class="btn btn-siguiente mt-3">
                <i class="bi bi-plus-circle"></i> Agendar Nueva Cita
            </a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}